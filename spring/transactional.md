# Transactional

#### **1. 전파 속성**

@Transactional의 전파 속성 설정은 propagation 옵션을 이용해 설정할 수 있다.

* **REQUIRED**
  * 부모 트랜잭션이 존재하지 않는 경우, 새로운 트랜잭션을 생성한다.
  * 부모 트랜잭션이 존재하는 경우, 부모 트랜잭션에 합류한다. (부모 트랜잭션만 존재)
* **REQUIRES_NEW**
  * 부모 트랜잭션의 존재 여부와 상관없이 항상 새로운 트랜잭션을 생성한다.
  * 따라서, 부모 트랜잭션이 존재하는 경우 부모 TX와 자식 TX 총 2개의 TX가 존재하게 된다.
  * 다른 트랜잭션이므로, commit과 rollback을 따로 진행하게 된다.
* **MANDATORY**
  * 부모 트랜잭션이 존재하지 않는 경우, 예외를 발생시킨다.
  * 부모 트랜잭션이 존재하는 경우, 부모 트랜잭션에 합류한다. (부모 트랜잭션만 존재)
* **NESTED**
  * 부모 트랜잭션이 존재하지 않는 경우, 새로운 트랜잭션을 생성한다.
  * 부모 트랜잭션이 존재하는 경우, **중첩 트랜잭션**을 생성한다.
    * 중첩 트랜잭션의 rollback은 중첩 트랜잭션의 시작 지점까지만 실행된다.
    * 중첩 트랜잭션 완료 후, 부모 트랜잭션의 rollback이 발생하면 모든 트랜잭션이 rollback된다.
    * 중첩 트랜잭션은 부모 트랜잭션 commit시 함께 commit된다.
* **NEVER**
  * 트랜잭션을 생성하지 않는다. (트랜잭션 없이 로직 실행)
  * 부모 트랜잭션이 존재하는 경우, 예외를 발생시킨다.
* **SUPPORTS**
  * 트랜잭션을 필요로 하지 않는다.
  * 트랜잭션이 존재하는 경우 해당 트랜잭션이 참여한다. (Like REQUIRED)
* **NOT_SUPPORTS**
  * 트랜잭션을 필요로 하지 않는다.
  * 진행 중인 트랜잭션이 있다면 중지하고 메서드가 종료된 이후 다시 시작한다.
